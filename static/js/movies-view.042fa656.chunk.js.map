{"version":3,"sources":["components/Searchbar/Searchbar.module.scss","components/Searchbar/Searchbar.js","components/MoviesPage/MoviesPage.js","views/MoviesView.js","components/Error/Error.js","api/movies-api.js","components/Error/Error.module.scss","components/MovieListItem/MovieListItem.module.scss","components/MoviesList/MoviesList.module.scss","components/Button/Button.module.scss","components/MovieListItem/MovieListItem.js","components/MoviesList/MoviesList.js","components/Button/Button.js"],"names":["module","exports","Searchbar","handleSubmit","useState","searchQuery","setSearchQuery","className","styles","SearchForm","onSubmit","e","preventDefault","trim","toast","warn","position","transition","Zoom","style","top","left","textAlign","width","margin","SearchFormInput","type","value","onChange","target","toLowerCase","autoComplete","autoFocus","placeholder","SearchFormButton","MoviesPage","history","useHistory","location","useLocation","movies","setMovies","moviesPageList","setMoviesPageList","page","setPage","loading","setLoading","error","setError","useEffect","search","movieQuery","URLSearchParams","get","a","moviesAPI","fetchSearchMovies","prevMovies","length","fetchMoviesList","updateStates","push","Error","errorContent","LoaderSpinner","MoviesList","Button","contentBtn","onLoadMore","prevPage","scroll","scrollToBottom","disabled","autoClose","MoviesView","role","text","ErrorContent","BASE_URL","API_KEY","urlSearchMovies","axios","data","results","fetchTrendingMovies","urlTrendingMovies","fetchMovieById","movie_id","urlMovieById","fetchCastMovie","urlCastMovie","cast","fetchReviewMovie","urlReviewMovie","MoviesListItem","id","title","original_title","titleMovie","MovieListItem","MovieLink","to","pathname","state","from","defaultProps","map","onClick"],"mappings":"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","file":"static/js/movies-view.042fa656.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"SearchForm\":\"Searchbar_SearchForm__10JQA\",\"SearchFormButton\":\"Searchbar_SearchFormButton__2Foje\",\"SearchFormInput\":\"Searchbar_SearchFormInput__3ObGx\"};","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { toast, Zoom } from 'react-toastify';\nimport styles from './Searchbar.module.scss';\n\nconst Searchbar = ({ handleSubmit }) => {\n  const [searchQuery, setSearchQuery] = useState('');\n\n  const handleChange = e => {\n    const { value } = e.target;\n    setSearchQuery(value.toLowerCase());\n  };\n\n  const handleSearchSubmit = e => {\n    e.preventDefault();\n\n    if (searchQuery.trim() === '') {\n      return toast.warn('Enter the movie title', {\n        position: 'top-left',\n        transition: Zoom,\n        style: {\n          top: 90,\n          left: 0,\n          textAlign: 'center',\n          width: 200,\n          margin: '0 auto',\n        },\n      });\n    }\n    handleSubmit(searchQuery);\n    setSearchQuery('');\n  };\n\n  return (\n    <form className={styles.SearchForm} onSubmit={handleSearchSubmit}>\n      <input\n        className={styles.SearchFormInput}\n        type=\"text\"\n        value={searchQuery}\n        onChange={handleChange}\n        autoComplete=\"off\"\n        autoFocus\n        placeholder=\"Search movies\"\n      />\n\n      <button\n        className={styles.SearchFormButton}\n        type=\"submit\"\n        aria-label=\"Search movies\"\n      >\n        Search\n      </button>\n    </form>\n  );\n};\n\nSearchbar.propTypes = {\n  handleSubmit: PropTypes.func.isRequired,\n};\n\nexport default Searchbar;\n","import React, { useState, useEffect } from 'react';\nimport moviesAPI from '../../api/movies-api';\nimport { useHistory, useLocation } from 'react-router-dom';\n\nimport Searchbar from '../Searchbar';\nimport MoviesList from '../MoviesList';\nimport Button from '../Button';\nimport LoaderSpinner from '../LoaderSpinner';\nimport Error from '../Error';\n\nimport { animateScroll as scroll } from 'react-scroll';\n\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nexport default function MoviesPage() {\n  const history = useHistory();\n  const location = useLocation();\n\n  const [movies, setMovies] = useState([]);\n  const [moviesPageList, setMoviesPageList] = useState([]);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [page, setPage] = useState(1);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    if (location.search === '') {\n      return;\n    }\n    const movieQuery = new URLSearchParams(location.search).get('movie');\n    setSearchQuery(movieQuery);\n  }, [location.search]);\n\n  useEffect(() => {\n    if (!searchQuery) {\n      return;\n    }\n\n    const fetchMoviesList = async () => {\n      try {\n        setLoading(true);\n        const moviesPageList = await moviesAPI.fetchSearchMovies(\n          searchQuery,\n          page,\n        );\n        setMoviesPageList(moviesPageList);\n        setMovies(prevMovies => [...prevMovies, ...moviesPageList]);\n        setLoading(false);\n\n        if (moviesPageList.length === 0) {\n          setError(`There are no movies on your request \"${searchQuery}\"`);\n        }\n      } catch (error) {\n        setError('Whoops, something went wrong. Enter your request again');\n      } finally {\n        setLoading(false);\n        // this.scroll();\n      }\n    };\n    fetchMoviesList();\n  }, [searchQuery, page]);\n\n  const handleSearchQuerySubmit = searchQuery => {\n    setSearchQuery(searchQuery);\n    updateStates();\n\n    history.push({ ...location, search: `movie=${searchQuery}` });\n  };\n\n  const updateStates = () => {\n    setMovies([]);\n    setPage(1);\n    setError(null);\n    setMoviesPageList([]);\n    // setId();\n  };\n\n  const loadMore = () => {\n    setPage(prevPage => prevPage + 1);\n    scroll.scrollToBottom();\n  };\n\n  return (\n    <>\n      <Searchbar handleSubmit={handleSearchQuerySubmit} />\n\n      {error && <Error errorContent={error} />}\n\n      {loading && <LoaderSpinner />}\n\n      {movies.length > 0 && !error && <MoviesList movies={movies} />}\n\n      {moviesPageList.length > 19 && !loading && !error && (\n        <Button contentBtn=\"Load More\" onLoadMore={loadMore} />\n      )}\n      {moviesPageList.length < 19 &&\n        moviesPageList.length > 0 &&\n        !loading &&\n        !error && <Button disabled contentBtn=\"End\" />}\n\n      <ToastContainer autoClose={3000} />\n    </>\n  );\n}\n","import MoviesPage from '../components/MoviesPage';\n\nexport default function MoviesView() {\n  return (\n    <>\n      <MoviesPage />\n    </>\n  );\n}\n","import PropTypes from 'prop-types';\nimport styles from './Error.module.scss';\n\nconst Error = ({ errorContent }) => {\n  return (\n    <div role=\"alert\" className={styles.Error}>\n      <p text={errorContent} className={styles.ErrorContent}>\n        {errorContent}\n      </p>\n    </div>\n  );\n};\n\nError.propTypes = {\n  errorContent: PropTypes.string.isRequired,\n};\n\nexport default Error;\n","import axios from 'axios';\n\nconst BASE_URL = 'https://api.themoviedb.org/3';\nconst API_KEY = 'd0babcf2df0d52b515db9698a0e458bb';\n\nconst fetchSearchMovies = async (searchQuery, page) => {\n  const urlSearchMovies = `${BASE_URL}/search/movie?api_key=${API_KEY}&language=en-US&page=${page}&query=${searchQuery}`;\n\n  try {\n    const { data } = await axios.get(urlSearchMovies);\n    // console.log(data.results);\n    return data.results;\n  } catch (error) {\n    return [];\n  }\n};\n\nconst fetchTrendingMovies = async page => {\n  const urlTrendingMovies = `${BASE_URL}/trending/movie/day?api_key=${API_KEY}&language=en-US&page=${page}`;\n\n  try {\n    const { data } = await axios.get(urlTrendingMovies);\n    // console.log(data.results);\n    return data.results;\n  } catch (error) {\n    return null;\n  }\n};\n\nconst fetchMovieById = async movie_id => {\n  const urlMovieById = `${BASE_URL}/movie/${movie_id}?api_key=${API_KEY}&language=en-US`;\n  try {\n    const { data } = await axios.get(urlMovieById);\n    // console.log(data);\n    return data;\n  } catch (error) {\n    return null;\n  }\n};\n\nconst fetchCastMovie = async movie_id => {\n  const urlCastMovie = `${BASE_URL}/movie/${movie_id}/credits?api_key=${API_KEY}&language=en-US`;\n  try {\n    const { data } = await axios.get(urlCastMovie);\n    // console.log(data.cast);\n    return data.cast;\n  } catch (error) {\n    return null;\n  }\n};\n\nconst fetchReviewMovie = async movie_id => {\n  const urlReviewMovie = `${BASE_URL}/movie/${movie_id}/reviews?api_key=${API_KEY}&language=en-US&page=1`;\n\n  try {\n    const { data } = await axios.get(urlReviewMovie);\n    // console.log(data.results);\n    return data.results;\n  } catch (error) {\n    return null;\n  }\n};\n\nconst moviesAPI = {\n  fetchSearchMovies,\n  fetchTrendingMovies,\n  fetchMovieById,\n  fetchCastMovie,\n  fetchReviewMovie,\n};\n\nexport default moviesAPI;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Error\":\"Error_Error__zscxp\",\"ErrorContent\":\"Error_ErrorContent__2fFjr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"MovieListItem\":\"MovieListItem_MovieListItem__3UxJ6\",\"MovieLink\":\"MovieListItem_MovieLink__aPKO5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"MoviesList\":\"MoviesList_MoviesList__2Bmda\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__z2W-M\"};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link, useLocation } from 'react-router-dom';\n\nimport styles from './MovieListItem.module.scss';\n\nexport default function MoviesListItem({ id, title, original_title }) {\n  const location = useLocation();\n\n  const titleMovie = title === '' || !title ? original_title : title;\n\n  return (\n    // <li className={styles.MovieListItem}>\n    //   <Link to={`${url}/${id}`}>{titleMovie}</Link>\n    // </li>\n\n    <li className={styles.MovieListItem}>\n      <Link\n        className={styles.MovieLink}\n        // to={`/movies/${id}`}\n        to={{\n          pathname: `/movies/${id}`,\n          state: { from: location },\n        }}\n      >\n        {titleMovie}\n      </Link>\n    </li>\n  );\n}\n\nMoviesListItem.defaultProps = {\n  title: '',\n  original_title: '',\n};\n\nMoviesListItem.propTypes = {\n  title: PropTypes.string,\n  original_title: PropTypes.string,\n  id: PropTypes.number.isRequired,\n  // onClickImage: PropTypes.func.isRequired,\n};\n","import React from 'react';\n\nimport PropTypes from 'prop-types';\n\nimport MoviesListItem from '../MovieListItem/MovieListItem';\n\nimport styles from './MoviesList.module.scss';\n\nexport default function MoviesList({ movies }) {\n  return (\n    <ul className={styles.MoviesList}>\n      {movies.map(({ id, original_title, title }) => (\n        <MoviesListItem\n          key={id}\n          id={id}\n          title={title}\n          original_title={original_title}\n        />\n      ))}\n    </ul>\n  );\n}\n\nMoviesList.propTypes = {\n  movies: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number.isRequired,\n    }),\n  ),\n};\n","import React from 'react';\n\nimport PropTypes from 'prop-types';\n\nimport styles from './Button.module.scss';\n\nconst Button = ({ onLoadMore, contentBtn, disabled }) => (\n  <button disabled={disabled} onClick={onLoadMore} className={styles.Button}>\n    {contentBtn}\n  </button>\n);\n\nButton.defaultProps = {\n  onLoadMore: () => null,\n  disabled: false,\n};\n\nButton.propTypes = {\n  onLoadMore: PropTypes.func,\n  contentBtn: PropTypes.string.isRequired,\n  disabled: PropTypes.bool,\n};\n\nexport default Button;\n"],"sourceRoot":""}